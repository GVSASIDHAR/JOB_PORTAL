{% extends "base.html" %}
{% block content %}
<div class="card">
  <h2>{{ job.title }}</h2>
  <p class="job-meta">
    {{ job.company_name|default:job.employer.company|default:job.employer.username }}
    &bull; {{ job.location|default:"Anywhere" }} &bull; {{ job.get_job_type_display }}
  </p>

  <p class="job-tags">
    {% if job.salary_min or job.salary_max %}
      Salary:
      {% if job.salary_min %}₹{{ job.salary_min }}{% endif %}
      {% if job.salary_max %} – ₹{{ job.salary_max }}{% endif %}
      &bull;
    {% endif %}
    Deadline: {{ job.deadline }}
    {% if not job.is_active %}
      <span class="tag-pill danger">Closed</span>
    {% endif %}
  </p>

  <hr>

  <h3>Job Description</h3>
  <p style="white-space:pre-wrap; font-size:0.95rem; line-height:1.5;">
    {{ job.description }}
  </p>

  <h3>Skills</h3>
  <p class="job-tags">
    {{ job.skills|default:"Not specified" }}
  </p>

  <div class="job-actions">
    <a href="{% url 'jobs:list' %}" class="btn btn-outline">← Back to Jobs</a>

    {% if user.is_authenticated and user == job.employer %}
      <a href="{% url 'jobs:edit' job.pk %}" class="btn btn-outline">Edit Job</a>
      <a href="{% url 'jobs:job_applicants' job.pk %}" class="btn btn-primary">View Applicants</a>
    {% endif %}

    {% if user.is_authenticated and user.role == "applicant" and job.is_active %}
      <a href="{% url 'jobs:apply' job.pk %}" class="btn btn-primary">Apply Now</a>
    {% endif %}

    {% if not user.is_authenticated and job.is_active %}
      <a href="{% url 'signup' %}?next={% url 'jobs:apply' job.pk %}" class="btn btn-primary">
        Apply Now (Create an account)
      </a>
    {% endif %}
  </div>
</div>
{% endblock %}